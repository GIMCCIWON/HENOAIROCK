<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MyPlayList">
  
  <select id="selectList" parameterType="MyPlayList" resultType="MyPlayList">
		SELECT  TT1.rnum as num,
		        TT1.album_path as albumImg,
		        TT1.title,
		        TT1.album,
		        TT1.artist,
		        TT1.feeling,
		        TT1.yt_link
		FROM(
		    SELECT ROWNUM as rnum, T1.*
		    FROM(
		        SELECT *
		        FROM music a
		        JOIN myplaylist b ON a.music_id = b.music_id
		        WHERE user_id = #{userId}
		        AND feeling = #{feeling}
		        AND mylist_div = #{myListDiv}
		        ORDER BY public_dt DESC
		    )T1
          <![CDATA[     WHERE ROWNUM <= #{pageSize} * (#{pageNo}-1)+#{pageSize}   ]]>
		)TT1
       <![CDATA[   WHERE rnum >=#{pageSize} * (#{pageNo}-1)+ 1 ]]>
  </select>
  
  <insert id="LikeListSave" parameterType="MyPlayList">
  <selectKey keyProperty="myListSeq" resultType="string" order="BEFORE">
         SELECT MY_LIST_SEQ.NEXTVAL FROM DUAL
  </selectKey>
    INSERT INTO MYPLAYLIST (mylist_seq, user_id, mylist_div) 
    VALUES (#{myListSeq} , #{userId}, 10)   
  </insert>
 
  
  
</mapper>